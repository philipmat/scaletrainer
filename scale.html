<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<!--script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js"></script-->
	<script type="text/javascript" src="lib/knockout-3.2.0.js"></script>
	<script type="text/javascript" src="main.js"></script>
</head>
<body>
	
<div id="scale-display" data-bind="foreach: notes">
	<span class="octave-note"><span class="note" data-bind="text: note">(note)</span><span class="octave" data-bind="text: octave">(8ve)</span></span>
</div>

<script type="text/coffeescript" src="scale.coffee"></script>
<script type="text/coffeescript">
$ = (id) ->
	document.getElementById id

S = window['scale']

keys = ['instrument', 'mode', 'key', 'measures', 'time', 'bpm', 'randomness', 'autoadvance']
model = {}
for k in keys
	model[k] = getParameterByName k
	
scale_in_key = S.scale model.key, model.mode
instrument_scale = S.instrument_scale model.instrument, scale_in_key
model.notes = ko.observableArray S.random_notes instrument_scale, 4

console.log model
ko.applyBindings model
</script>
<!--script type="text/javascript" src="https://rawgit.com/jashkenas/coffeescript/master/extras/coffee-script.js"></script-->
<script type="text/javascript" src="lib/coffee-script.js"></script>
</body>
</html>
